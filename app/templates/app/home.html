{% extends 'app/base.html' %}
{% load static %}
{% block contenido %}

<div class="header">
    
</div>

<div class="menu">
   
        <div class="container">
           
            <div class="scroll-box">
                {% for producto in productos %}
                 <div class="item">
                    
                    <li>
                        <span>{{ producto.nombre }}</span>
                        <span>{{ producto.descripcion }}</span>
                        <span>{{ producto.precio }} </span>
                        <form method="post" action="{% url 'agregar_al_carrito' producto.producto_id %}">
                            {% csrf_token %}
                            <button type="submit" class="botonCarro">Añadir al carrito</button>
                        </form>
                    </li>
                    
                 </div>                <!-- Más elementos -->
                {% endfor %} 
            </div>
          
            
           
        </div>
        
        <br>
        <button style="width: 80px; " type="button">Ingreso Manual</button>
        <!-- <button style="width: 80px; " type="button">comprar</button> -->
</div>
    
    <!-- ========================================================================== -->    
<div class="main"> 
        <div class="containerCarrito">
            <div><h5><b>Resumen del carrito</b></h5></div>
            <hr>
            {% if carrito_items %}
            <ul class="productoIngresado">
                {% for item in carrito_items %}
                <li class="lista">
                    <div class="product-name">{{ item.producto.nombre }}</div>
                    <div class="cart-controls d-flex">
                        <form method="post" action="{% url 'restar_producto' item.producto.producto_id %}">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-outline-secondary">-</button>
                        </form>
                        <input type="number" value="{{ item.cantidad }}" readonly class="form-control text-center" style="width: 50px;">
                        <form method="post" action="{% url 'agregar_al_carrito' item.producto.producto_id %}">
                            {% csrf_token %}
                            <button type="submit" style="width:50px;
                            background-color:green;
                            height: 50px;
                            transform: translateX(150px);" 
                            class="">+</button>
                        </form>
                    </div>
                    <div class="product-price text-right">{{ item.total_precio }} CLP</div>
                    <form method="post" action="{% url 'eliminar_del_carrito' item.id %}">
                        {% csrf_token %}
                        <button type="submit" style="width:50px;
                                                    background-color:red;
                                                    height: 50px;
                                                    margin-left: 130px"
                                                    
                                                    
                                                    
                        class="">x</button>
                    </form>
                </li>
                {% endfor %}
            </ul>



           
                <div class="col">Total productos: {{ carrito_total_cantidad }}</div>
                <div class="col text-right">Total: {{ carrito_total }}</div>

            </div>
            <form method="post" action="{% url 'confirmar_compra' %}">
                {% csrf_token %}
                <button type="submit" class="ConfirmarCompra">Confirmar Compra</button>
            </form>
            {% else %}
            <p>Tu carrito está vacío.</p>
            {% endif %}

   
</div>  
</div>  


<script src="{% static 'app/js/carro.js' %}"></script>
{% endblock %}
            {% comment %} <div class="container">
                <div class="scroll-box">
                    {% if carrito_items %}
                    <div class="item">
                        <li>
                            <span >{{ item.producto.nombre }}</span>
                            <span>8gb de ram</span>
                            <span>$500000</span>
                            <button type="button">comprar</button>
                        </li>
                    </div>
                    <div class="item">  
                     <li>
                        <input type="text" style="width: 50px;">
                        <input type="text" style="width: 50px;">
                        <input type="text" style="width: 50px;">
                        <input type="text" style="width: 50px;">
                        <button type="button">-</button>
                        <button type="button">+</button>
                      
                    </li>
                </div>
                    <div class="item">Elemento 3</div>
                    <div class="item">Elemento 4</div>
                    <div class="item">Elemento 1</div>
                    <div class="item">Elemento 1</div>
                    <div class="item">Elemento 4</div>
                    <div class="item">Elemento 1</div>
                    <div class="item">Elemento 1</div>
                  
                    <div class="item">Elemento 4</div>
                    <div class="item">Elemento 1</div>
                    <div class="item">Elemento 1</div>
                  
                    <div class="item">Elemento 4</div>
                    <div class="item">Elemento 1</div>
                    <div class="item">Elemento 1</div>
                  
                  
                    <div class="item">Elemento 4</div>
                    <div class="item">Elemento 1</div>
                    <div class="item">Elemento 1</div>
                  
                    <!-- Más elementos -->
                </div>
         </div>

                <div class="cajaInferior">
                     

                        <div class="cajaInterna">
                            <div class="item">SUBTOTAL</div>
                            <div class="item">IVA</div>
                            <div class="item">TOTAL</div>
                            <div class="item">5555555</div>
                            <div class="item">3333</div>
                            <div class="item">8888888</div>


                            <br><br>
                        <div class="cajaBotones">
                            <button type="button">MEDIO DE PAGO</button>
                            <br>
                            <button type="button">CORREO CLIENTE</button>
                            <br>
                            <button type="button">CANCELAR</button>
                            <br>
                            <button type="button">PAGAR</button>

                        </div>
                        </div>
                    
                       
                </div>
                    



           
    </div> {% endcomment %}
<!-- </div> -->

       
{% comment %}            
            <h4><b>Lista de Productos</b></h4>
           
<div class="menu">
                <div class="contenedor">
                    {% for producto in productos %}
                    <div class="scroll-box">
                        <div class="item">
                        
                            <li>
                                <span>{{ producto.nombre }}</span>
                                <span>{{ producto.descripcion }}</span>
                                <span>{{ producto.precio }} </span>
                <form method="post" action="{% url 'agregar_al_carrito' producto.producto_id %}">
                    {% csrf_token %}
                    <button type="submit" class="botonCarro">Añadir al carrito</button>
                </form>

                                
                            </li>
                             {% endfor %} 
</div>
 {% endcomment %}
   

{% comment %}   <ul class= "listaP">
    {% for producto in productos %}
    <li>

           
                 <span>{{ producto.nombre }} </span> 
                   
                 <span>{{ producto.descripcion }}</span>
                  
                 <span>{{ producto.precio }} CLP</span>
    
                <form method="post" action="{% url 'agregar_al_carrito' producto.producto_id %}">
                    {% csrf_token %}
                    <button type="submit" class="botonCarro">Añadir al carrito</button>
                 
                </form>
            </li>
            {% endfor %} 
    </ul>  
 {% endcomment %}
{% comment %} ====================================================================================== {% endcomment %}      
        <!-- Sección del carrito -->
{% comment %} 
 <div class="main"> {% endcomment %}
