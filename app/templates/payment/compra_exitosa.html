{% extends 'app/base.html' %}
{% block contenido %}
{% load static %}
<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compra Exitosa</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'app/css/venta.css' %}">
</head>

<body>

    <div class="container">
        <div class="card card-compra">
            {% if compra.usuario %}
            <p class="card-text">Gracias por tu compra, <strong>{{ compra.usuario.username }}</strong>.</p>
            {% elif compra.correo %}
            <p class="card-text">Gracias por tu compra, <strong>{{ compra.correo }}</strong>.</p>
            {% else %}
            <p class="card-text">Â¡Gracias por preferirnos!</p>
            {% endif %}
            <p class="card-text">Fecha de la compra: <strong>{{ compra.fecha|date:"d/m/Y H:i" }}</strong></p>
            <p class="card-text">Total: <strong>{{ compra.total|floatformat:2 }} CLP</strong></p>

            <h4>Detalles de la compra</h4>
            <ul class="list-group mb-3">
                {% for detalle in detalles %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    {{ detalle.cantidad }} x {{ detalle.producto.nombre }}
                    <span>{{ detalle.subtotal|floatformat:2 }} CLP</span>
                </li>
                {% endfor %}
            </ul>

            <!-- Add PDF Download Button -->
            <a href="?pdf=1" class="btn btn-secondary">Descargar Boleta (PDF)</a>
            <a href="{% url 'home' %}" class="btn btn-primary">Volver al inicio</a>
        </div>
    </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>
{%endblock contenido%}